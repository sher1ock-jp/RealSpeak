# RealSpeak - 製品設計書

## 1. 製品概要

RealSpeakは、実際の英会話環境をより忠実に再現し、ユーザーの興味に合わせたコンテキストで英会話学習を提供するWebサービスです。従来の英会話学習サービスの課題を解決し、より自然で実践的な英語学習体験を提供します。

## 2. 課題と解決策

### 2.1 課題

1. **非現実的な会話環境**：
   - 現在の英会話サービスは実際の英会話環境を十分に再現できていない
   - 実際の会話では複数の人が同時多発的に話し、様々なイントネーションが存在する

2. **興味の欠如**：
   - 提供されるテーマがユーザーの興味に合わず、会話に集中できない
   - 没入感の欠如により学習効果が低下

### 2.2 解決策

1. **コンテキスト認識型会話生成**：
   - ユーザーの現在位置情報や画像アップロードから状況を把握
   - 「この状況でどんな会話が発生するだろう？」という疑問に応える多様な会話パターンを生成

2. **リアルな多人数会話シミュレーション**：
   - 複数人による自然な会話を再現（割り込み、同時発話など）
   - 約5分間の会話セッションを生成し、実践的な環境を提供

3. **パーソナライズされたテーマ選定**：
   - ユーザーがリクエストしたテーマについて、MCPを活用して専門的・具体的な情報を抽出
   - ユーザーの過去の会話履歴を参考にした会話生成

## 3. 主要機能

### 3.1 コンテキスト取得機能

- **画像アップロード分析**：
  - ユーザーがアップロードした画像からLLMが状況を分析
  - 「この状況でどんな会話が発生するか」を推測し、多様な会話パターンを提案

- **位置情報活用**：
  - GPSデータを利用してユーザーの現在地を特定
  - 周辺環境に合わせた会話コンテキストの提案

### 3.2 会話生成エンジン

- **LLMによる多人数会話生成**：
  - 2〜4人の自然な会話を生成
  - 会話の重なり、割り込み、相槌などを再現
  - ユーザーの過去の会話履歴を参考にした自然な会話の流れを生成

- **音声合成**：
  - OpenAIのTTSを活用した高品質な音声生成
  - 話者ごとに異なる声色、イントネーション、スピードを設定

### 3.3 パーソナライゼーション

- **テーマ情報抽出**：
  - ユーザーがリクエストしたテーマについてMCPを活用して専門的・具体的な情報を抽出
  - 抽出した情報を基に、より深みのある会話を生成

- **会話履歴活用**：
  - 過去の会話で出てきたトピックや表現を新しい会話に自然に組み込む
  - ユーザーの学習進度に合わせた表現の再利用

### 3.4 学習支援機能

- **トランスクリプト表示**：
  - 会話の文字起こしをリアルタイム表示
  - 重要表現のハイライト

- **単語・フレーズ学習**：
  - 会話内の重要表現を抽出して復習可能
  - フラッシュカード形式での学習機能

## 4. 技術仕様

### 4.1 バックエンド

- **言語/フレームワーク**：
  - Python
  - FastAPI

- **AI/ML**：
  - OpenAI GPT-4（会話生成）
  - OpenAI TTS（音声合成）
  - OpenAI Vision API（画像分析）

- **データベース**：
  - PostgreSQL（ユーザーデータ、学習履歴）
  - Redis（キャッシュ）

### 4.2 フロントエンド

- **Web**：
  - TypeScript
  - Next.js
  - Responsive design（スマホ対応）

- **モバイル対応**：
  - PWA（Progressive Web App）
  - iOS/Android対応

### 4.3 インフラストラクチャ

- **クラウドサービス**：
  - Google Cloud Platform (GCP)
  - Terraform によるインフラストラクチャのコード化

- **スケーラビリティ**：
  - オートスケーリング
  - 負荷分散

## 5. ユーザーエクスペリエンス

### 5.1 ユーザーフロー

1. **初回登録/ログイン**：
   - メール/SNSアカウントでの登録
   - 英語レベル診断テスト（オプション）

2. **コンテキスト設定**：
   - 画像アップロードによる状況設定
   - テーマのリクエスト（オプション）
   - 位置情報の許可（オプション）

3. **会話生成と再生**：
   - 5分程度の会話が自動生成され再生
   - トランスクリプトの表示

4. **復習と学習**：
   - 重要表現の保存
   - 復習クイズ

### 5.2 UI/UXデザイン

- **シンプルで直感的なインターフェース**：
  - ミニマルデザイン
  - ワンタップ操作の重視

- **没入型体験**：
  - 高品質オーディオ
  - 視覚的フィードバック

## 6. 収益モデル

### 6.1 サブスクリプションプラン

- **無料プラン**：
  - 1日1回の会話生成
  - 基本的な学習機能

- **プレミアムプラン**（月額）：
  - 無制限の会話生成
  - 高度な学習機能
  - 会話のダウンロード

### 6.2 追加収益源

- **ワンタイム購入**：
  - 特定のシチュエーションパック
  - 専門分野の会話（ビジネス、医療、IT等）

## 7. 開発ロードマップ

### 7.1 フェーズ1（MVP）

- 基本的な会話生成機能
- 画像アップロードによる状況分析
- シンプルなWebインターフェース

### 7.2 フェーズ2

- 会話履歴を活用した会話生成
- MCPによる専門的情報抽出
- モバイル対応強化（PWA）

### 7.3 フェーズ3

- 高度なパーソナライゼーション
- 学習分析ダッシュボード
- API公開（パートナー向け）

## 8. 技術アーキテクチャ

### 8.1 システム構成

- **フロントエンド**：
  - Next.js (TypeScript)
  - React Context/Redux for state management
  - PWA対応

- **バックエンド**：
  - Python FastAPI
  - OpenAI API連携
  - WebSocket for real-time communication

- **インフラ**：
  - GCP Cloud Run (コンテナ化されたサービス)
  - Cloud SQL (PostgreSQL)
  - Memorystore (Redis)
  - Terraform によるインフラ管理

### 8.2 データフロー

1. ユーザーが画像/テーマをアップロード
2. バックエンドでOpenAI APIを使用して分析
3. 会話シナリオ生成
4. OpenAI TTSで音声合成
5. WebSocketを通じてフロントエンドに配信
6. ユーザーへの提示と学習データの保存

## 9. まとめ

RealSpeakは、従来の英会話学習の課題を解決し、ユーザーの興味とコンテキストに合わせた自然な英会話環境を提供します。最新のAI技術（OpenAI系API）を活用し、ユーザーに負担をかけることなく、実践的で効果的な英語学習体験を実現します。

画像からLLMが状況を分析し「この状況でどんな会話が発生するか」を推測、複数人による自然な会話を生成することで、実際の英会話環境により近い学習機会を提供します。また、ユーザーの過去の会話履歴を参考にしながら、MCPを活用して専門的・具体的な情報を抽出し、より深みのある会話生成を実現します。

TypeScript/Next.jsによるフロントエンド、Pythonによるバックエンド、PWAによるモバイル対応、GCPでのクラウド展開、Terraformによるリソース管理という最新の技術スタックで、スケーラブルかつ高品質なサービスを提供します。
